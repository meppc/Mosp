# 核心模块技术选型

本文档详细介绍 Rust 跨平台白板软件各核心模块的技术选择和性能指标。

## 技术方案总览

| 模块          | 技术方案                          | 性能指标           |
|---------------|-----------------------------------|--------------------|
| 图形渲染      | slint                             | 4K@60FPS 渲染延迟  |
| 输入处理      | winit + core-graphics             | 200μs 事件响应     |
| 网络同步      | tokio + y-sweet CRDT              | 50ms 操作同步延迟  |
| 数据存储      | sled + SQLite                     | 10k ops/sec 吞吐量 |
| 安全加密      | rustls + ring                     | AES-NI 指令集加速  |

## 技术选型详解

### 图形渲染 - Slint

选择 [Slint](https://slint.dev) 作为主要UI框架和渲染引擎的原因：

- **跨平台一致性**: 在多目标平台上提供一致的视觉表现
- **高性能矢量渲染**: 支持复杂图形的流畅绘制和动画效果
- **Rust原生支持**: 完全集成到Rust生态系统中
- **声明式UI设计**: 简化用户界面开发流程
- **硬件加速**: 自动利用各平台的图形硬件特性

Slint与`raqote`和`glow`等底层图形库集成，实现完整的矢量图形功能。

### 输入处理 - winit + core-graphics

- **winit**: 提供跨平台窗口创建和事件处理抽象
- **core-graphics**: 用于macOS/iPadOS平台的原生输入优化
- **自定义事件分发器**: 实现低延迟输入处理和笔迹预测
- **手势识别系统**: 支持多点触控和Apple Pencil等专业输入设备

### 网络同步 - tokio + y-sweet CRDT

- **tokio**: 高性能异步运行时，支持高并发连接处理
- **y-sweet**: 基于Yjs的CRDT实现，专为协作编辑优化
- **WebSocket/WebRTC**: 双协议支持，适应不同网络环境
- **加密通信**: 端到端加密确保数据安全

### 数据存储 - sled + SQLite

- **sled**: 高性能嵌入式KV存储，支持增量式存储策略
- **SQLite**: 稳定可靠的关系型数据支持
- **serde序列化**: 高效的数据序列化和反序列化处理

### 安全加密 - rustls + ring

- **rustls**: 纯Rust实现的TLS库，提供现代密码学支持
- **ring**: 提供底层密码学原语，包括AES-GCM加密
- **AES-NI优化**: 利用现代CPU的加密指令集加速

## 技术栈评估标准

选择上述技术栈的核心评估标准包括：

1. **跨平台兼容性** - 支持所有目标平台的无缝运行
2. **性能表现** - 满足专业级白板应用的响应要求
3. **Rust生态集成** - 充分利用Rust的安全性和性能优势
4. **社区活跃度** - 确保长期技术支持和更新
5. **许可兼容性** - 符合项目的开源策略和商业需求

引用:
[5] https://github.com/emilk/egui
[8] https://github.com/jrmuizel/raqote