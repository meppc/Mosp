import { Button, VerticalBox, HorizontalBox, LineEdit } from "std-widgets.slint";

// Main window component for Mosp application
export component MainWindow inherits Window {
    title: "Mosp";
    min-width: 800px;
    min-height: 600px;
    
    // Tool state
    property <int> toolType: 0; // 0: Brush, 1: Shape, 2: Arrow, 3: Eraser, 4: Text, 5: Selection
    
    // Callbacks
    callback exit();
    callback show_error(string);
    callback show_info(string);
    
    Rectangle {
        background: #f5f5f5;
        vertical-stretch: 1;
        
        HorizontalBox {
            padding: 8px;
            spacing: 8px;
            
            // Toolbar
            VerticalBox {
                width: 40px;
                spacing: 8px;
                
                // Brush tool
                Rectangle {
                    height: 40px;
                    border-radius: 4px;
                    background: toolType == 0 ? #e0e0e0 : transparent;
                    border-width: 1px;
                    border-color: #ccc;
                    
                    Text {
                        text: "🖌️";
                        font-size: 20px;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }
                    
                    TouchArea {
                        clicked => {
                            toolType = 0;
                        }
                    }
                }
                
                // Shape tool
                Rectangle {
                    height: 40px;
                    border-radius: 4px;
                    background: toolType == 1 ? #e0e0e0 : transparent;
                    border-width: 1px;
                    border-color: #ccc;
                    
                    Text {
                        text: "⬜";
                        font-size: 20px;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }
                    
                    TouchArea {
                        clicked => {
                            toolType = 1;
                        }
                    }
                }
                
                // Arrow tool
                Rectangle {
                    height: 40px;
                    border-radius: 4px;
                    background: toolType == 2 ? #e0e0e0 : transparent;
                    border-width: 1px;
                    border-color: #ccc;
                    
                    Text {
                        text: "➡️";
                        font-size: 20px;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }
                    
                    TouchArea {
                        clicked => {
                            toolType = 2;
                        }
                    }
                }
                
                // Eraser tool
                Rectangle {
                    height: 40px;
                    border-radius: 4px;
                    background: toolType == 3 ? #e0e0e0 : transparent;
                    border-width: 1px;
                    border-color: #ccc;
                    
                    Text {
                        text: "🧽";
                        font-size: 20px;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }
                    
                    TouchArea {
                        clicked => {
                            toolType = 3;
                        }
                    }
                }
                
                // Text tool
                Rectangle {
                    height: 40px;
                    border-radius: 4px;
                    background: toolType == 4 ? #e0e0e0 : transparent;
                    border-width: 1px;
                    border-color: #ccc;
                    
                    Text {
                        text: "T";
                        font-size: 20px;
                        font-weight: 700;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }
                    
                    TouchArea {
                        clicked => {
                            toolType = 4;
                        }
                    }
                }
                
                // Selection tool
                Rectangle {
                    height: 40px;
                    border-radius: 4px;
                    background: toolType == 5 ? #e0e0e0 : transparent;
                    border-width: 1px;
                    border-color: #ccc;
                    
                    Text {
                        text: "◻️";
                        font-size: 20px;
                        horizontal-alignment: center;
                        vertical-alignment: center;
                    }
                    
                    TouchArea {
                        clicked => {
                            toolType = 5;
                        }
                    }
                }
                
                Rectangle { vertical-stretch: 1; }
            }
            
            // Canvas area
            Rectangle {
                horizontal-stretch: 1;
                background: white;
                border-width: 1px;
                border-color: #ccc;
                
                Text {
                    text: "Canvas will be implemented here";
                    font-size: 16px;
                    horizontal-alignment: center;
                    vertical-alignment: center;
                    color: #888;
                }
                
                // Canvas interaction area
                TouchArea {
                    property <bool> is-pressed: false;
                    property <Point> last-position: {x: 0, y: 0};
                    
                    clicked => {
                        is-pressed = true;
                        // Handle tool down event
                    }
                    
                    // Simplify for now to get the build working
                    // We'll implement proper event handling later
                }
            }
            
            // Properties panel
            VerticalBox {
                width: 200px;
                padding: 8px;
                spacing: 8px;
                
                Text {
                    text: "Properties";
                    font-weight: 700;
                }
                
                Rectangle {
                    height: 1px;
                    background: #ccc;
                }
                
                // Tool-specific properties will be shown here
                // This is a placeholder
                Text {
                    text: "Tool properties will be shown here";
                    font-size: 12px;
                    wrap: word-wrap;
                }
                
                Rectangle { vertical-stretch: 1; }
            }
        }
    }
}
